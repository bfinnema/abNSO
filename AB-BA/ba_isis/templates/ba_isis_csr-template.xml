<!-- RFS isis CSR
route-policy og prefix-set er ikke variabler, bør kanskje hentes fra inventorty (felles for alle core rutere)
PS! interface name og number her kan være både uplink downlink eller begge (dvs, to interface)

ISIS config for CSR
 -->
<config-template xmlns="http://tail-f.com/ns/config/1.0">
  <devices xmlns="http://tail-f.com/ns/ncs">
    <device>
      <name>{$csr_device}</name>
      <config>
        <interfaces xmlns="http://cisco.com/ns/yang/Cisco-IOS-XR-um-interface-cfg">
          <interface>
            <interface-name>{$csr_interface_name}{$csr_interface_number}</interface-name>
            <description>{$csr_interface_description}</description>
            <mtu>9080</mtu>
            <service-policy xmlns="http://cisco.com/ns/yang/Cisco-IOS-XR-um-if-service-policy-qos-cfg">
              <input>
                <service-policy-name>CORE-IN</service-policy-name>
              </input>
            </service-policy>
            <ipv4>
              <addresses xmlns="http://cisco.com/ns/yang/Cisco-IOS-XR-um-if-ip-address-cfg">
                <address>
                  <address>{$csr_ipv4_address}</address>
                  <netmask>{$csr_ipv4_mask}</netmask>
                </address>
              </addresses>
            </ipv4>
            <lldp xmlns="http://cisco.com/ns/yang/Cisco-IOS-XR-um-lldp-cfg">
              <enable/>
            </lldp>
          </interface>
        </interfaces>
        <router xmlns="http://cisco.com/ns/yang/Cisco-IOS-XR-um-router-isis-cfg">
          <isis>
          <processes>
            <process>
              <process-id>METRO3</process-id>
              <is-type>level-2-only</is-type>
              <nets>
                <net>
                <net-id>{$csr_net_id}</net-id>
                </net>
              </nets>
              <nsf>
                <cisco/>
              </nsf>
              <log>
                <adjacency>
                <changes/>
                </adjacency>
              </log>
              <lsp-gen-interval>
                <maximum-wait>5000</maximum-wait>
                <initial-wait>1</initial-wait>
                <secondary-wait>50</secondary-wait>
              </lsp-gen-interval>
              <lsp-refresh-interval>
                <lsp-refresh-interval-time>64000</lsp-refresh-interval-time>
              </lsp-refresh-interval>
              <max-lsp-lifetime>
                <max-lsp-lifetime>65535</max-lsp-lifetime>
              </max-lsp-lifetime>
              <address-families>
                <address-family>
                <af-name>ipv4</af-name>
                <saf-name>unicast</saf-name>
                <metric-style>
                  <wide/>
                </metric-style>
                <spf-interval>
                  <maximum-wait>
                  <maximum-wait-time>5000</maximum-wait-time>
                  </maximum-wait>
                  <initial-wait>
                  <initial-wait-time>1</initial-wait-time>
                  </initial-wait>
                  <secondary-wait>
                  <secondary-wait-time>50</secondary-wait-time>
                  </secondary-wait>
                </spf-interval>
                </address-family>
              </address-families>
              <interfaces>
                <interface>
                  <interface-name>Loopback0</interface-name>
                  <passive/>
                  <address-families>
                    <address-family>
                      <af-name>ipv4</af-name>
                      <saf-name>unicast</saf-name>
                    </address-family>
                  </address-families>
                </interface>
                <interface>
                  <interface-name>{$csr_interface_name}{$csr_interface_number}</interface-name>
                  <circuit-type>level-2-only</circuit-type>
                  <point-to-point/>
                  <hello-padding>
                    <disable/>
                  </hello-padding>
                  <address-families>
                    <address-family>
                      <af-name>ipv4</af-name>
                      <saf-name>unicast</saf-name>
                      <metric>
                        <levels>
                          <level>
                            <level-id>2</level-id>
                            <default-metric>100050</default-metric>
                          </level>
                        </levels>
                      </metric>
                      <mpls>
                        <ldp>
                          <sync>
                            <level>2</level>
                          </sync>
                        </ldp>
                      </mpls>
                    </address-family>
                  </address-families>
                </interface>
              </interfaces>
            </process>
          </processes>
          </isis>
        </router>
      </config>
    </device>
  </devices>
</config-template>
